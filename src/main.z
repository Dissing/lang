

fn main(argc: int, argv: **char) -> int {
  if argc != 3 {
    printf("Usage: compiler INPUT OUTPUT\n");
    abort();
  }

  var sess: Session;

  sess.interner = interner_create();
  sess.source = source_map_create();

  val unit: CompilationUnit = parse(&sess, argv[1]);

  resolve(&sess, &unit);

  generate(&sess, unit, argv[2]);

  return 0;
}
